modules = ["c-clang14", "bash", "cpp-clang14", "go-1.23", "python-base-3.12", "postgresql-16", "web"]

[nix]
channel = "stable-24_05"
packages = ["ipscan"]

[workflows]
runButton = "Mobile-Proxy"

[[workflows.workflow]]
name = "3proxy"
author = 39603852
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "chmod +x /src/scripts/setup.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "./src/scripts/setup.sh"

[[workflows.workflow]]
name = "3proxy-full"
author = 39603852
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "chmod +x /src/scripts/setup.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "/src/scripts/setup.sh"

[[workflows.workflow]]
name = "3proxy-mobile"
author = 39603852
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "chmod +x /src/scripts/setup.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "/src/scripts/setup.sh"

[[workflows.workflow]]
name = "Mobile-Proxy"
author = 39603852
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "mkdir -p bin obj logs"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd src && make"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd .. && ./bin/mobile_proxy"

[[workflows.workflow]]
name = "Proxy-Server"
author = 39603852
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "mkdir -p bin obj"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd src && make proxy_server"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd .. && ./bin/proxy_server"

[deployment]
run = ["sh", "-c", "cd src && ../bin/mobile_proxy"]
