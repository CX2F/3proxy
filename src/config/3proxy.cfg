
# 3proxy Full Network Configuration
# Path: src/config/3proxy.cfg

# Core settings
daemon
pidfile /var/run/3proxy/3proxy.pid
nscache 65536
nserver 8.8.8.8
nserver 8.8.4.4
timeouts 1 5 30 60 180 1800 15 60

# Log configuration
log /logs/3proxy-%y%m%d.log D
logformat "L%C - %U [%t] \"%T\" %E %I %O %N/%R:%r"

# User authentication - strongly recommended
users admin:CL:password123

# TCP optimization for mobile connections
# Reduces latency and improves battery life
proxy -olSO_REUSEADDR,SO_KEEPALIVE -osTCP_NODELAY,TCP_QUICKACK

# SOCKS5 Service (port 5000)
auth strong
allow admin
socks -p5000 -a

# HTTP(S) Proxy (port 8080)
proxy -p8080

# DNS Proxy (port 5353)
dns -p5353

# Mail services
# SMTP Relay (port 5025)
proxy -p5025

# POP3 Proxy (port 5110)
pop3p -p5110

# TCP Port Forwarding example (8888 to 80)
tcppm -p8888 -r80 -i127.0.0.1

# UDP Port Forwarding example (5353 to 53)
udppm -p5353 -r53 -i8.8.8.8

# SSL configuration for HTTPS
plugin /plugins/SSLPlugin.so ssl_plugin
ssl_server_cert /certs/server.crt
ssl_server_key /certs/server.key

# Tor Integration
# Route traffic through Tor (requires Tor to be running)
parent 1000 socks5 127.0.0.1 9050
allow * * * 80,443
proxy -p5555

# Custom domain handler
# This will serve your custom TLDs via the DNS proxy
dnspr
